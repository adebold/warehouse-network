apiVersion: v1
kind: Secret
metadata:
  name: claude-platform-secrets
  namespace: claude-platform
  labels:
    app.kubernetes.io/name: claude-platform
    app.kubernetes.io/component: secrets
  annotations:
    # Enable secret rotation
    secret-rotation.enabled: "true"
    secret-rotation.interval: "30d"
type: Opaque
stringData:
  # Database credentials - These should be replaced with actual values via sealed-secrets or external-secrets
  DATABASE_URL: "postgresql://claude_user:CHANGE_ME@postgres-service.database:5432/claude_platform?schema=public&sslmode=require"
  
  # Redis credentials
  REDIS_URL: "redis://:CHANGE_ME@redis-service.cache:6379"
  REDIS_PASSWORD: "CHANGE_ME"
  
  # JWT secrets
  JWT_SECRET: "CHANGE_ME_TO_SECURE_RANDOM_STRING_AT_LEAST_32_CHARS"
  JWT_REFRESH_SECRET: "CHANGE_ME_TO_ANOTHER_SECURE_RANDOM_STRING"
  
  # API keys and tokens
  GITHUB_TOKEN: "CHANGE_ME"
  NPM_TOKEN: "CHANGE_ME"
  DOCKER_REGISTRY_TOKEN: "CHANGE_ME"
  
  # OAuth2 credentials
  OAUTH2_CLIENT_ID: "CHANGE_ME"
  OAUTH2_CLIENT_SECRET: "CHANGE_ME"
  
  # Encryption keys
  ENCRYPTION_KEY: "CHANGE_ME_TO_32_BYTE_BASE64_STRING"
  
  # Monitoring credentials
  GRAFANA_API_KEY: "CHANGE_ME"
  PROMETHEUS_REMOTE_WRITE_KEY: "CHANGE_ME"
  
  # AWS credentials for S3/CloudWatch/etc
  AWS_ACCESS_KEY_ID: "CHANGE_ME"
  AWS_SECRET_ACCESS_KEY: "CHANGE_ME"
  
  # Webhook secrets
  WEBHOOK_SECRET: "CHANGE_ME"
  
---
# Example of using ExternalSecrets operator (recommended for production)
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: claude-platform-secret-store
  namespace: claude-platform
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1
      auth:
        jwt:
          serviceAccountRef:
            name: claude-platform-sa
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: claude-platform-external-secrets
  namespace: claude-platform
spec:
  refreshInterval: 15m
  secretStoreRef:
    name: claude-platform-secret-store
    kind: SecretStore
  target:
    name: claude-platform-secrets
    creationPolicy: Owner
  dataFrom:
  - extract:
      key: claude-platform/production/*